# Задание: API для динамических правил начисления бонусов

## Описание задачи

Разработать сервис для начисления бонусных баллов пользователям за различные действия в системе.

Стек: PHP 8.4, Laravel 11, Postgres

---

## Правила

- За каждые потраченные $10 начисляется **1 бонус**.
- В выходные и праздничные дни начисляется **x2 бонусов**.
- **VIP-клиенты** получают **+40%** к любым начислениям.

---

## Важные нюансы

- Все правила начисления должны быть **легко изменяемыми**.
- Новые правила должно быть **легко добавлять** — завтра могут появиться новые механики, поэтому их нельзя жестко прописывать в коде.
- Все правила должны храниться либо в **конфигурации**, либо в **базе данных**.
- В конфиге или БД должны быть все цифры: сколько начислять, когда, при каких условиях.
- **Правила должны комбинироваться.**
  - Базовое правило **всегда применяется первым**.
  - Далее к результату последовательно применяются все дополнительные правила.
  - Порядок применения дополнительных правил должен быть **настраиваемым** — должно быть возможно менять последовательность расчета **без изменения кода**.

---

## Пример расчета

- Базовое правило: `150 / 10 = 15 бонусов`
- Выходной день (x2): `15 × 2 = 30 бонусов`
- VIP-бонус (+40%): `30 × 1.4 = 42 бонуса`

**Итог: 42 бонуса**

---

## Что нужно реализовать?

Один API-метод:

### `POST /calculate-bonus`

#### На входе:

```json
{
  "transaction_amount": 150,
  "timestamp": "2025-03-08T14:30:00Z",
  "customer_status": "vip"
}
```

#### На выходе:

```json
{
  "total_bonus": 42,
  "applied_rules": [
    { "rule": "base_rate", "bonus": 15 },
    { "rule": "holiday_bonus", "bonus": 15 },
    { "rule": "vip_boost", "bonus": 12 }
  ]
}
```

---

## Дополнительные условия

- Вы **сами должны продумать**, как хранить правила (например, в JSON/YAML-файле или БД).
- API **не должно зависеть от конкретных правил**, а только от их **структуры**.
- Интерфейс для управления правилами **не требуется**.
- Добавление и редактирование правил можно выполнять вручную.

---

## README-файл должен содержать инструкции:

- Как **запустить** сервис.
- Как его **настроить**.
- Как **использовать**.
